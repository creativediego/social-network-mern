version: '3'
services:
  buzzcentral-client-prod:
    image: buzzcentral:client-${NODE_ENV}-latest
    env_file: ${ENV_FILE}
    # restart: unless-stopped # restart on failure
    stdin_open: true # allow input from terminal
    ports:
      - "${CLIENT_PORT}:${CLIENT_PORT}"
    volumes: # to store tsl certificate configuration
      - ${TLS_CERT_FILE}:/keys/tls_cert.pem
      - ${TLS_KEY_FILE}:/keys/tls_key.pem
  
  buzzcentral-api-prod:
    image: buzzcentral:server-${NODE_ENV}-latest
    env_file: ${ENV_FILE}
    # restart: unless-stopped
    ports:
      - "${API_PORT}:${API_PORT}"

volumes:
  caddy-data:
    driver: local
  caddy-config:
    driver: local

